

<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <link rel="stylesheet" href="static/css/estilos.css">

  <title>Power BI Reports</title>

  <script>
    document.addEventListener('contextmenu', function(event) {
        event.preventDefault();
    });
  </script>   

  <style>
    .trama {
        background-image: url("{{ url_for('static', filename='img/trama.png')}}");
        background-size: 300px;
        background-position: center; /* Centra la imagen */
        margin-top: 50px;      
        height: 100vh; 
    }
  </style>

  <div align-items: center>
    <table>
      <tr>
        <td style='width:80pt;'> <img src="{{ url_for('static', filename='img/Logo_BIservice.png') }}"  alt="" width="95" height="63"> </td>
        <td style='width:240pt;'> <FONT SIZE=4 color="white" STYLE="margin:auto">      Bienvenido, {{ current_user.fullname }}  </font> </td> 

        <td >
          <nav id="navegar" class="navegacion"  >
             <ul Class ="Menu" > 

                <li><a href="#" >Grupos</a>
                  <ul id="grpusr-list" Class ="submenu"  ></ul>
                </li>              
                
                <li><a href="#" >Reportes Disponibles</a> 
                  <ul id="report-list" Class ="submenu"  ></ul>
                </li> 
                

                {% if mostrar_listado %}
                
                  <li><a href="#">Mantenedores</a> 
                    <ul Class ="submenu" > 
                      <li><a href="{{ url_for('hgrupo') }}" target="_blank">Grupo</a> </li>
                      <li> <a href="{{ url_for('hUsuario') }}" target="_blank">Usuario</a> </li>
                      <li><a href="{{ url_for('hReporte') }}" target="_blank">Reporte</a></li>
                      <li><a href="{{ url_for('hGrupoUsuario') }}" target="_blank">Grupo usuario</a></li>
                      <li><a href="{{ url_for('hGrupoReporte') }}" target="_blank">Grupo reporte</a></li>
                      <li><a href="{{ url_for('hPerfil') }}" target="_blank">Perfil</a></li>
                      <li><a href="{{ url_for('hWorkspace') }}" target="_blank">Workspace</a></li>
                    </ul>
                  </li>
                  {% else %}
                  {% endif %}
                
                <li><a href="{{ url_for('logout') }}">Logout</a></li>
                
             </ul>
          </nav>
        </td>
        
        <td style='width:100pt;'>          
        </td>

        <td style='width:500pt;'>
          <FONT SIZE=2 color=#35cec1 > Grupo seleccionado:  </font>
          <FONT SIZE=4 color="white" STYLE="margin:auto" id="group-name-display"> </font>
        </td>

        <td style='width:500pt;'>
            <FONT SIZE=2 color=#35cec1 > Reporte seleccionado:  </font> 
            <FONT SIZE=4 color="white" STYLE="margin:auto" id="report-name-display"> </font> 
        </td>


      </tr> 
    </table>   
  </div>  

</head>


<body>
  <div class="trama">  
  <main >
    
    <section id="report-container" >
     <!-- <h1>Visualización del Reporte</h1> -->
      <div id="report-embed-container"></div>
    </section>

    <img id="initial-image" src= "{{ url_for('static', filename='img/imagen_ini_pbi.png') }}"  alt="">
  </main>

</div>
  

  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s"
 crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/powerbi-client@2.17.0/dist/powerbi.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/powerbi-client/2.15.1/powerbi.min.js" integrity="sha512-OWIl8Xrlo8yQjWN5LcMz5SIgNnzcJqeelChqPMIeQGnEFJ4m1fWWn668AEXBrKlsuVbvDebTUJGLRCtRCCiFkg==" crossorigin="anonymous"></script>
  <script src="{{ url_for('static', filename='js/index.js') }}"></script>

  <script>
      document.addEventListener('DOMContentLoaded', function() {
        const reportNameDisplay = document.getElementById("report-name-display");
        const initialImage = document.getElementById("initial-image");
        const reportList = document.getElementById("report-list");

        // Ocultar la imagen inicialmente si reportNameDisplay está vacío
        if (reportNameDisplay.textContent === " ") {
          initialImage.style.display = "block";
        } else {
          initialImage.style.display = "none";
        }

        // Agregar un evento de clic a cada elemento li dentro de report-list
        reportList.addEventListener('click', function(event) {
          // Ocultar la imagen cuando se hace clic en cualquier elemento de la lista
          initialImage.style.display = 'none';
        });
      });
    
  </script>

    <script>

            // Enviar solicitud POST al cerrar la ventana usando XMLHttpRequest
            //window.onbeforeunload = function() {
            //    var xhr = new XMLHttpRequest();
            //    xhr.open("POST", "/shutdown", true);
            //    xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            //    xhr.send();
            //};
            window.onbeforeunload = function() {
                // Verifica si se está haciendo una solicitud de cierre y si el navegador soporta sendBeacon
                if (navigator.sendBeacon) {
                    navigator.sendBeacon('/shutdown');
                }
            };

    </script>


</body>
</html>

<!-- 13-08-2024 Agrega boton logout en index, codigo de home -->

 